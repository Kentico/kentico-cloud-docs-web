extends ../includes/layout.pug
block content
    main(id='main')
        .article(data-display-mode=`${content.display_mode.value.length ? content.display_mode.value[0].name.toLowerCase() : 'one-page'}`)
            .article__left
                include ../includes/sub-navigation.pug
            .article__right
                .article__content
                    h1 !{content.title.value}
                    .article__notes
                        time.article__date(datetime= moment(content.system.lastModified).format('YYYY-MM-DD')) !{moment(content.system.lastModified).format('MMMM D, YYYY')}
                        .article__author 
                            if (content.author.value && content.author.value.length)
                                each author, index in content.author.value
                                    - let separator = ''; if (index < content.author.value.length - 2) {separator = ', ';} if (index === content.author.value.length - 2) {separator = ' and '}
                                    | !{author.name.value}!{separator}                                  
                            else
                                | !{UIMessages.article___no_author.value}
                        if (isPreview || isKenticoIP)
                            a(href=`https://app.kontent.ai/goto/edit-item/project/${projectId}/variant-codename/default/item/${content.system.id}`, target='_blank', rel='noopener') Edit
                    if (platform && !availablePlatforms.length)
                        .language-selector.language-selector--unprocessed
                            ul.language-selector__list
                                each item in platform
                                    li.language-selector__item
                                        a(href=`#`, data-platform=item.codename, data-slug=item.slug, data-dpr, data-icon=item.icon, data-tech-tooltip=item.title, data-tech-tooltip-active='false', data-tech-tooltip-clicked=UIMessages.technology_picker_tooltip.value.replace('{TechnologyName}', item.title), class=`language-selector__link`)
                    if (availablePlatforms && availablePlatforms.length)
                        .language-selector.language-selector--unprocessed
                            ul.language-selector__list.language-selector__list--static
                                - var highlighIndex = 0; availablePlatforms.forEach((item, index) => { if (preselectedPlatform === item.slug) { highlighIndex = index } });
                                each item, index in availablePlatforms
                                    li.language-selector__item
                                        a(href=`${req.path}?tech=${item.slug}`, data-dpr, data-icon=item.icon, data-tech-tooltip=item.title, data-tech-tooltip-active='false', data-tech-tooltip-clicked=UIMessages.technology_picker_tooltip.value.replace('{TechnologyName}', item.title), class=`language-selector__link${index === highlighIndex ? ' language-selector__link--active' : ''}`)
                    if (introduction !== '<p><br></p>')
                        if (content.display_mode.value.length && content.display_mode.value[0].name.toLowerCase() === 'step-by-step')
                            h2.article__heading-introduction(id='a-introduction') !{UIMessages && UIMessages.article___introduction.value}
                        | !{minify(introduction)}
                    div(data-aside-container='table-of-contents')
                        div(data-aside='table-of-contents')
                            include ../includes/table-of-contents.pug
                    | !{minify(content.content.value)}
                    if (nextSteps.value !== '<p><br></p>')
                        h2.table-of-contents__whatsnext(id='a-whats-next') !{UIMessages && UIMessages.article___next_steps.value}
                        | !{minify(nextSteps.value)}
                    div(data-aside-container='feedback')
                        div(data-aside='feedback')
                            include ../includes/feedback.pug
            aside.article__aside
                .aside
    include ../includes/feedback-form.pug